# Load aliases if available
if [ -f ~/.zsh_aliases ]; then
	source ~/.zsh_aliases
fi

# Shell & editor preferences
set -o vi
export EDITOR="nvim"

# PostgreSQL (Homebrew)
export LDFLAGS="-L/opt/homebrew/opt/postgresql@16/lib"
export CPPFLAGS="-I/opt/homebrew/opt/postgresql@16/include"
export PATH="$PATH:/opt/homebrew/opt/postgresql@16/bin"

# Android SDK
export ANDROID_HOME="$HOME/Library/Android/Sdk"
export PATH="$PATH:$ANDROID_HOME"
export PATH="$PATH:$ANDROID_HOME/platform-tools"
export PATH="$PATH:$ANDROID_HOME/build-tools/34.0.0"
export PATH="$PATH:$ANDROID_HOME/emulator"
export PATH="$PATH:$ANDROID_HOME/cmdline-tools/latest/bin/"

# NVM (Node Version Manager)
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && source "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && source "$NVM_DIR/bash_completion"

# Flutter
export PATH="$PATH:$HOME/Development/flutter/bin"

# Homebrew & macOS system paths
export PATH="$PATH:/usr/local/bin"
export PATH="$PATH:/opt/homebrew/bin"
export PATH="$PATH:/opt/homebrew/sbin"
export PATH="$PATH:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"

# Mason (Neovim LSP packages)
export MASON_PACKAGES_PATH="$HOME/.local/share/nvim/mason/packages"
export PATH="$PATH:$MASON_PACKAGES_PATH/phpactor"

# Miniforge (Python)
export PATH="$PATH:$HOME/miniforge3/bin"

# JAVA
export JAVA_HOME="/opt/homebrew/opt/openjdk@11/libexec/openjdk.jdk/Contents/Home"
export PATH="$JAVA_HOME/bin:$PATH"

# yazi (TUI file manager) integration with directory tracking
function y() {
	local tmp="$(mktemp -t "yazi-cwd.XXXXXX")" cwd
	yazi "$@" --cwd-file="$tmp"
	if cwd="$(<"$tmp")" && [ -n "$cwd" ] && [ "$cwd" != "$PWD" ]; then
		builtin cd "$cwd"
	fi
	rm -f "$tmp"
}
